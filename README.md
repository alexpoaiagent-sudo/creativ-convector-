# Как работает связка Obsidian + Git + AI

## Обзор системы

Эта система автоматизирует управление заметками в Obsidian с помощью AI агента и Git для версионирования.

```
┌─────────────────────────────────────────────────────────────────┐
│                         OBSIDIAN                                │
│              (Создание и редактирование заметок)                │
└────────────────────────────┬────────────────────────────────────┘
                             │
                             ▼
┌─────────────────────────────────────────────────────────────────┐
│                        AI АГЕНТ                                 │
│         (Анализ, категоризация, распределение)                 │
└────────────────────────────┬────────────────────────────────────┘
                             │
                             ▼
┌─────────────────────────────────────────────────────────────────┐
│                          GIT                                    │
│              (Версионирование и синхронизация)                  │
└────────────────────────────┬────────────────────────────────────┘
                             │
                             ▼
┌─────────────────────────────────────────────────────────────────┐
│                        GITHUB                                   │
│           (Облачное хранилище и резервные копии)               │
└─────────────────────────────────────────────────────────────────┘
```

---

## Текущее состояние: Локальное хранение

### Что уже работает

**Сейчас все хранится ТОЛЬКО локально:**

```
/Users/alexander/Documents/Заметки/  ← Локальный Git репозиторий
├── .git/                            ← История версий (локально)
├── Изчезающие заметки/              ← Входящие заметки
├── Черновики по проектам/           ← Обработанные заметки
│   ├── БК - Кофейня/
│   ├── ВК - Проект/
│   ├── Марафон/
│   ├── Стратег/
│   └── Общее/
├── scripts/                         ← AI агент
└── reports/                         ← Отчеты
```

**Преимущества локального хранения:**
- ✅ Быстрая работа
- ✅ Полный контроль
- ✅ Работает без интернета
- ✅ История изменений (Git)

**Недостатки:**
- ❌ Нет резервной копии в облаке
- ❌ Нельзя работать с других устройств
- ❌ Риск потери данных при поломке компьютера

---

## Как работает AI агент

### 1. Создание заметки в Obsidian

Вы пишете заметку в папке **"Изчезающие заметки"**:

```markdown
Файл: Изчезающие заметки/Идея для кофейни.md

Содержимое:
---
Хочу добавить новый курс по латте-арту для бариста.
Нужно разработать программу обучения на 3 дня.
Включить теорию и практику работы с молоком.
---
```

### 2. Запуск AI агента

```bash
cd "/Users/alexander/Documents/Заметки"
npm run process
```

### 3. Анализ заметки

AI агент:

**Шаг 1:** Читает содержимое файла
```javascript
const content = "Хочу добавить новый курс по латте-арту для бариста..."
```

**Шаг 2:** Извлекает ключевые слова
```javascript
keywords = ["латте", "бариста", "обучение", "молоко"]
```

**Шаг 3:** Сопоставляет с проектами
```javascript
Проекты и их ключевые слова:
- БК - Кофейня: [кофе, бариста, эспрессо, обучение] ← СОВПАДЕНИЕ!
- ВК - Проект: [вк, вконтакте]
- Марафон: [марафон, курс]
```

**Шаг 4:** Определяет проект
```javascript
Найдено 3 совпадения с "БК - Кофейня"
→ Проект: БК - Кофейня
```

**Шаг 5:** Перемещает файл
```javascript
Из: Изчезающие заметки/Идея для кофейни.md
В:  Черновики по проектам/БК - Кофейня/Идея для кофейни.md
```

### 4. Результат

```
🤖 Запуск AI агента...
📝 Найдено заметок: 1

🔍 Анализ: Идея для кофейни.md
   → Проект: БК - Кофейня
   ✓ Перемещено

✅ Обработка завершена!
```

---

## Как работает Git (локально)

### Что такое Git

Git - это система контроля версий. Она запоминает все изменения в ваших файлах.

### Пример работы

**1. Начальное состояние**
```
Commit 1: Initial commit
├── README.md
└── Изчезающие заметки/
    └── Заметка1.md
```

**2. Обработали заметки**
```
Commit 2: Обработка заметок
├── README.md
├── Изчезающие заметки/
│   └── (пусто)
└── БК - Кофейня/
    └── Заметка1.md  ← переместилась
```

**3. Добавили новую заметку**
```
Commit 3: Новая заметка о рецепте
├── README.md
├── Изчезающие заметки/
│   └── (пусто)
└── БК - Кофейня/
    ├── Заметка1.md
    └── Рецепт латте.md  ← новая
```

### Команды Git

```bash
# Посмотреть изменения
git status

# Зафиксировать изменения
git add -A
git commit -m "Добавлены заметки о латте"

# Посмотреть историю
git log --oneline

# Откатиться к предыдущей версии
git checkout <commit-id>
```

---

## Синхронизация с GitHub (настройка)

### Зачем нужен GitHub

**GitHub = облачное хранилище для Git репозиториев**

```
┌──────────────────┐                    ┌──────────────────┐
│  Ваш компьютер   │                    │     GitHub       │
│                  │                    │   (облако)       │
│  Локальный Git   │  ←── push/pull ──→ │  Удаленный Git   │
│                  │                    │                  │
└──────────────────┘                    └──────────────────┘
```

**Преимущества:**
- ✅ Резервная копия в облаке
- ✅ Доступ с любого устройства
- ✅ Совместная работа
- ✅ История изменений онлайн

### Как настроить синхронизацию

#### Шаг 1: Создать репозиторий на GitHub

1. Зайдите на https://github.com
2. Нажмите "New repository"
3. Название: `strateg-notes`
4. Описание: `Система управления заметками`
5. Выберите: Private (приватный)
6. НЕ создавайте README (он уже есть)
7. Нажмите "Create repository"

#### Шаг 2: Связать локальный репозиторий с GitHub

```bash
cd "/Users/alexander/Documents/Заметки"

# Добавить удаленный репозиторий
git remote add origin https://github.com/ваш-username/strateg-notes.git

# Проверить
git remote -v
```

#### Шаг 3: Отправить код на GitHub

```bash
# Первая отправка
git push -u origin main

# Введите логин и пароль GitHub
# (или используйте Personal Access Token)
```

#### Шаг 4: Последующие синхронизации

```bash
# Отправить изменения на GitHub
git push

# Получить изменения с GitHub
git pull
```

---

## Полный workflow с GitHub

### Ежедневная работа

```
1. Утро: Получить последние изменения
   ↓
   git pull

2. Создать заметки в Obsidian
   ↓
   Пишете в "Изчезающие заметки"

3. Обработать заметки AI агентом
   ↓
   npm run process

4. Зафиксировать изменения в Git
   ↓
   git add -A
   git commit -m "Обработаны заметки за 12 января"

5. Отправить на GitHub
   ↓
   git push

6. Вечер: Повторить при необходимости
```

### Автоматизация

Создайте скрипт `sync.sh`:

```bash
#!/bin/bash
cd "/Users/alexander/Documents/Заметки"

# Обработать заметки
npm run process

# Зафиксировать изменения
git add -A
git commit -m "Auto-sync: $(date '+%Y-%m-%d %H:%M')"

# Отправить на GitHub
git push

echo "✅ Синхронизация завершена!"
```

Сделайте исполняемым:
```bash
chmod +x sync.sh
```

Запускайте одной командой:
```bash
./sync.sh
```

---

## Синхронизация с базой знаний (ВК кофе)

### Как это работает

```
┌─────────────────────────────────────────────────────────────┐
│  Репозиторий "Стратег" (ваши заметки)                       │
│  /Users/alexander/Documents/Заметки/                        │
│                                                             │
│  БК - Кофейня/                                              │
│  ├── Обучение бариста.md                                    │
│  ├── Рецепт латте.md                                        │
│  └── Техника эспрессо.md                                    │
└─────────────────────────────────────────────────────────────┘
                            │
                            │ npm run sync
                            ▼
┌─────────────────────────────────────────────────────────────┐
│  AI агент анализирует:                                      │
│  1. Читает ваши заметки                                     │
│  2. Читает базу знаний                                      │
│  3. Ищет совпадения по ключевым словам                      │
│  4. Определяет роли (бариста/менеджер/сомелье)              │
└─────────────────────────────────────────────────────────────┘
                            │
                            ▼
┌─────────────────────────────────────────────────────────────┐
│  Репозиторий "ВК кофе" (база знаний)                        │
│  /Users/alexander/VK-offee/                                 │
│                                                             │
│  materials/                                                 │
│  ├── barista/                                               │
│  │   ├── espresso-basics.md      ← совпадение!             │
│  │   └── milk-techniques.md      ← совпадение!             │
│  └── training/                                              │
│      └── training-program.md     ← совпадение!             │
└─────────────────────────────────────────────────────────────┘
                            │
                            ▼
┌─────────────────────────────────────────────────────────────┐
│  Отчет: reports/sync-report.md                              │
│                                                             │
│  ## Обучение бариста.md                                     │
│  **Роль:** бариста                                          │
│  **Найдено соответствий:** 3                                │
│                                                             │
│  ### espresso-basics.md                                     │
│  - Совпадений: 5                                            │
│  - Рекомендация: Добавить в раздел "Основы эспрессо"       │
└─────────────────────────────────────────────────────────────┘
```

### Запуск синхронизации

```bash
npm run sync
```

### Пример отчета

```markdown
# Отчет о синхронизации с базой знаний

**Дата:** 2026-01-12

**Проанализировано заметок:** 8

## Обучение бариста.md

**Путь:** БК - Кофейня/Обучение бариста.md
**Роль:** бариста
**Ключевые слова:** обучение, эспрессо, техника, практика

### Найдено соответствий: 3

#### espresso-basics.md
- **Путь:** materials/barista/espresso-basics.md
- **Совпадений:** 5
- **Общие ключевые слова:** эспрессо, техника, практика
- **Рекомендация:** Добавить в раздел "Основы приготовления эспрессо"

#### training-program.md
- **Путь:** materials/training/training-program.md
- **Совпадений:** 3
- **Общие ключевые слова:** обучение, практика
- **Рекомендация:** Включить в программу обучения

---

## Рецепт латте.md

**Путь:** БК - Кофейня/Рецепт латте.md
**Роль:** бариста
**Ключевые слова:** латте, молоко, рецепт

### Найдено соответствий: 2

#### milk-techniques.md
- **Путь:** materials/barista/milk-techniques.md
- **Совпадений:** 4
- **Общие ключевые слова:** молоко, латте, техника
- **Рекомендация:** Добавить в раздел "Работа с молоком"
```

---

## Настройка путей к репозиториям

### Файл config.json

```json
{
  "repositories": {
    "notes": {
      "name": "Стратег",
      "path": "../../../Стратег",
      "remote": "https://github.com/your-username/strateg-notes.git",
      "description": "Репозиторий для хранения заметок"
    },
    "knowledgeBase": {
      "name": "ВК кофе",
      "path": "../../../VK-offee",
      "remote": "https://github.com/your-username/vk-coffee.git",
      "description": "База знаний кофейни"
    }
  },
  "sync": {
    "autoCommit": true,
    "commitMessage": "Auto-sync: обновление заметок",
    "branches": {
      "notes": "main",
      "knowledgeBase": "main"
    }
  }
}
```

### Как обновить пути

1. Откройте `config.json`
2. Измените `path` на актуальные пути
3. Добавьте URL GitHub репозиториев в `remote`
4. Сохраните файл

---

## Схема данных

### Локальное хранение (сейчас)

```
Компьютер
└── /Users/alexander/Documents/
    ├── Заметки/              ← Git репозиторий (локально)
    │   ├── .git/             ← История версий
    │   ├── Изчезающие заметки/
    │   ├── Черновики/
    │   └── scripts/
    │
    └── VK-offee/             ← База знаний (локально)
        ├── materials/
        └── training/
```

### С GitHub (после настройки)

```
┌─────────────────────────────────────────────────────────────┐
│                      Ваш компьютер                          │
│                                                             │
│  /Users/alexander/Documents/                                │
│  ├── Заметки/          ← Git (локально)                     │
│  └── VK-offee/         ← Git (локально)                     │
└──────────────────────┬──────────────────────────────────────┘
                       │
                       │ git push / git pull
                       │
┌──────────────────────▼──────────────────────────────────────┐
│                        GitHub                               │
│                                                             │
│  github.com/you/strateg-notes  ← Заметки (облако)          │
│  github.com/you/vk-coffee      ← База знаний (облако)      │
└─────────────────────────────────────────────────────────────┘
                       │
                       │ git clone / git pull
                       │
┌──────────────────────▼──────────────────────────────────────┐
│                   Другой компьютер                          │
│                                                             │
│  Можете работать с теми же заметками!                       │
└─────────────────────────────────────────────────────────────┘
```

---

## Команды для работы

### Ежедневные команды

```bash
# Перейти в папку заметок
cd "/Users/alexander/Documents/Заметки"

# Обработать новые заметки
npm run process

# Синхронизация с базой знаний
npm run sync

# Получить статус
npm run report

# Посмотреть изменения в Git
git status

# Зафиксировать изменения
git add -A
git commit -m "Описание изменений"

# Отправить на GitHub (после настройки)
git push

# Получить изменения с GitHub
git pull
```

### Полезные Git команды

```bash
# История коммитов
git log --oneline

# Посмотреть изменения в файле
git diff имя-файла.md

# Откатить файл к предыдущей версии
git checkout HEAD~1 имя-файла.md

# Посмотреть удаленные репозитории
git remote -v

# Создать ветку для экспериментов
git checkout -b experiment

# Вернуться на главную ветку
git checkout main
```

---

## Безопасность и резервное копирование

### Текущее состояние (только локально)

**Риски:**
- ❌ Поломка жесткого диска = потеря всех данных
- ❌ Кража/потеря ноутбука = потеря всех данных
- ❌ Случайное удаление = сложно восстановить

**Защита:**
- ✅ Git хранит историю (можно откатиться)
- ✅ Time Machine (если настроен)

### После настройки GitHub

**Защита:**
- ✅ Копия в облаке GitHub
- ✅ История всех изменений
- ✅ Доступ с любого устройства
- ✅ Можно восстановить в любой момент

### Рекомендации

1. **Настройте GitHub** - это займет 10 минут
2. **Делайте push каждый день** - автоматизируйте через скрипт
3. **Используйте приватные репозитории** - для личных заметок
4. **Регулярно проверяйте** - что все синхронизировано

---

## Troubleshooting

### Проблема: Заметки не обрабатываются

**Решение:**
```bash
# Проверьте, что файлы есть
ls "Изчезающие заметки/"

# Проверьте расширение файлов (должно быть .md)
ls "Изчезающие заметки/"*.md

# Запустите с выводом ошибок
node scripts/process-notes.js
```

### Проблема: Git не работает

**Решение:**
```bash
# Проверьте, что Git установлен
git --version

# Проверьте, что вы в правильной папке
pwd

# Должно быть: /Users/alexander/Documents/Заметки

# Проверьте статус Git
git status
```

### Проблема: Не могу отправить на GitHub

**Решение:**
```bash
# Проверьте, что remote настроен
git remote -v

# Если пусто, добавьте:
git remote add origin https://github.com/username/repo.git

# Проверьте интернет
ping github.com

# Проверьте авторизацию
git push
# Введите логин и Personal Access Token
```

### Проблема: Конфликты при git pull

**Решение:**
```bash
# Сохраните локальные изменения
git stash

# Получите изменения с GitHub
git pull

# Верните локальные изменения
git stash pop

# Если есть конфликты, разрешите их вручную
```

---

## Следующие шаги

### 1. Настроить GitHub (рекомендуется)

- [ ] Создать аккаунт на GitHub (если нет)
- [ ] Создать репозиторий `strateg-notes`
- [ ] Связать локальный Git с GitHub
- [ ] Сделать первый push
- [ ] Проверить, что все файлы загрузились

### 2. Настроить автоматизацию

- [ ] Создать скрипт `sync.sh`
- [ ] Настроить cron для ежедневного запуска
- [ ] Или настроить Obsidian Shell Commands

### 3. Настроить базу знаний

- [ ] Создать/клонировать репозиторий ВК кофе
- [ ] Обновить пути в `config.json`
- [ ] Запустить `npm run sync`
- [ ] Проверить отчеты

### 4. Оптимизировать workflow

- [ ] Добавить свои ключевые слова в `process-notes.js`
- [ ] Создать дополнительные категории проектов
- [ ] Настроить автоматические коммиты

---

## Полезные ссылки

- [Git документация](https://git-scm.com/doc)
- [GitHub Guides](https://guides.github.com/)
- [Obsidian документация](https://help.obsidian.md/)
- [Node.js документация](https://nodejs.org/docs/)

---

## Поддержка

При возникновении вопросов:

1. Проверьте раздел Troubleshooting
2. Посмотрите логи в консоли
3. Проверьте отчеты в папке `reports/`
4. Проверьте `git status`

---

**Версия:** 1.0
**Дата:** 2026-01-12
**Автор:** AI Agent + Claude Sonnet 4.5
